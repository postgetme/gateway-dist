module.exports=function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=3)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("bluebird")},function(e,t,o){e.exports=o(4)},function(e,t,o){console.log("Gateway is running"),o(5),o(6),o(7),o(8),new(o(19))},function(e,t,o){const n=o(1).execSync;setInterval(()=>{n("echo 1 > /dev/watchdog")},3e3)},function(e,t,o){const n=o(1).execSync,s=o(2);n("echo 6 > /sys/class/gpio/export"),n("echo out > /sys/class/gpio/gpio6/direction"),async function(){for(;;)n("echo 1 > /sys/class/gpio/gpio6/value"),await s.delay(1e3),n("echo 0 > /sys/class/gpio/gpio6/value"),await s.delay(1e3)}()},function(e,t,o){const n=o(1).execSync,s=o(2);let r=0,c=!0,i="auto eth0\niface eth0 inet static\naddress 192.168.0.99\nnetmask 255.255.255.0\ngateway 192.168.0.1\ndns-nameservers 192.168.0.1\n";n("echo 7 > /sys/class/gpio/export"),n("echo in > /sys/class/gpio/gpio7/direction"),async function(){for(;c;){let e=n("cat /sys/class/gpio/gpio7/value");await s.delay(1e3),48==e[0]?r++:r=0,r>=10?(delay=50,c=!1,console.log("detected reset key"),n(`echo "${i}" > /etc/network/interfaces.d/eth0`),setTimeout(()=>{n("echo 0 > /sys/class/gpio/gpio6/value"),n("reboot")},3e3)):delay=1e3}}()},function(e,t,o){const n=o(0),s=o(9),r=o(10),c=o(11),i=o(12),u=o(13),a=o(14),l=o(15),p=n();p.use(s()),p.use(r()),p.use(c.json()),p.use("/",n.static("../web")),p.get("/state",(e,t)=>{t.json({state:"ok"})}),p.get("/date",(e,t)=>{t.json({date:(new Date).toISOString()})}),p.use("/config",i),p.use("/devices",u),p.use("/nets",a),p.use("/access",l);let f=8e3;f=80,p.listen(f,function(){console.log("WebServer is running on port",f)}),e.exports=p},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("body-parser")},function(e,t,o){var n=o(0).Router();n.get("/",(e,t)=>{t.json({config:"config"})}),e.exports=n},function(e,t,o){var n=o(0).Router();n.get("/",(e,t)=>{t.json({a:1})}),e.exports=n},function(e,t,o){var n=o(0).Router();n.get("/",(e,t)=>{t.json({b:1})}),n.post("/eth0",(e,t)=>{t.end()}),n.post("/wlan0",(e,t)=>{t.end()}),n.post("/ppp0",(e,t)=>{t.end()}),e.exports=n},function(e,t,o){var n=o(0).Router(),s=o(16);n.get("/",(e,t)=>{t.json(s.get("access").value())}),n.post("/",(e,t)=>{var o=Object.assign({},s.get("access").value(),e.body);s.set("access",o).write(),t.json(s.get("access").value())}),e.exports=n},function(e,t,o){let n=null;const s=o(17)(n=new(o(18))("/etc/gateway.conf"));s.defaults({serverState:"offline",access:{}}).write(),e.exports=s},function(e,t){e.exports=require("lowdb")},function(e,t){e.exports=require("lowdb/adapters/FileSync")},function(e,t){e.exports=class{constructor(){console.log("Agent is running")}}}]);